function RequestListener() {
  this.handler = this.handler.bind(this);
}

RequestListener.prototype.setRouter = function (router) {
  this._router = router;
};

RequestListener.prototype.setRequestHandler = function (RequestHandler) {
  this._RequestHandler = RequestHandler;
};

RequestListener.prototype.setErrorRequestHandler = function (ErrorRequestHandler) {
  this._ErrorRequestHandler = ErrorRequestHandler;
};

RequestListener.prototype.setErrorHandler = function (errorHandler) {
  this._errorHandler = errorHandler;
};

RequestListener.prototype.handler = function (request, response) {
  var constructorObject = {
    request: request,
    response: response,
    route: this._router.getRoute(request),
    errorHandler: this._errorHandler
  };

  if (constructorObject.route instanceof Error) {
    this._ErrorRequestHandler.create(constructorObject).execute();
  }
  else {
    this._RequestHandler.create(constructorObject).execute();
  }

};

module.exports = RequestListener;
